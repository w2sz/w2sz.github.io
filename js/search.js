document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".search-input"),r=document.querySelector(".search-result-container"),a=new LocalSearch({path:searchConfig.path,top_n_per_article:searchConfig.top_n_per_article,unescape:searchConfig.unescape});function e(){document.querySelector(".search-popup").classList.remove("search-activate"),s.value="",r.innerHTML='<div class="search-result-message" ></div>'}function t(){var e,t;a.isfetched&&(t=(e=s.value.trim().toLowerCase()).split(/[-\s]+/),0<e.length&&(resultItems=a.getResultItems(t)),1===t.length&&""===t[0]?r.innerHTML='<div class="search-result-message" ></div>':0===resultItems.length?r.innerHTML='<div class="search-result-message" >No result found</div>':r.innerHTML=`
      <div class="search-result-message">${resultItems.length} result(s) found</div>
      <ul class="search-result-list">${resultItems.map(e=>e.item).join('<div class="h-line-secondary"></div>')}
      </ul>`)}searchConfig.preload&&(console.log("loading page"),a.fetchData()),document.querySelector(".search-btn").addEventListener("click",function(){document.querySelector(".search-popup").classList.add("search-activate"),a.isfetched||a.fetchData()}),document.querySelector(".search-popup-overlay").addEventListener("click",e),document.querySelector(".search-close-btn").addEventListener("click",e),"auto"==searchConfig.trigger?s.addEventListener("input",t):s.addEventListener("keypress",e=>{"Enter"===e.key&&t()}),window.addEventListener("search:loaded",t)});